{% extends "base.html" %}
{% load static %}

{% block content %}

    <div class="hide">From {{ daterange_form.start_date }} to {{ daterange_form.end_date }}</div>

    <h2>General salary information</h2>

    <div class="alert alert-danger" id="error_msg" style="display: none;">

    </div>

    <script>
        function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
        }

        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                }
            }
        });

    </script>

    <script>
        $(function() { $("#dt_range").daterangepicker(
            {
                presetRanges: [
				    {text: 'All available range',
                    dateStart: function() { return moment(document.getElementById('id_start_date').value) },
                    dateEnd: function() { return moment(document.getElementById('id_end_date').value) }
				    }],
                dateFormat: 'dd.mm.yy',
			    altFormat: 'dd.mm.yy',
                change: function(event, data) { dateRangeChangeAJAX() }
            }
        ); });
    </script>

    <input id="dt_range" name="e1">

    <br>
    <br>
    <br>
    <div id="records_block">

    </div>

{% endblock %}